parameters:
    ezplatform.cron.registry.cronjobs.class: Ibexa\Bundle\Cron\Registry\CronJobsRegistry

services:
    _defaults:
        autowire: true
        autoconfigure: true

    Ibexa\Bundle\Cron\Registry\CronJobsRegistry:
        class: '%ezplatform.cron.registry.cronjobs.class%'
        lazy: true
        arguments:
            - '%kernel.environment%'
            - '@Ibexa\Core\MVC\Symfony\SiteAccess'

    Ibexa\Bundle\Cron\Command\CronRunCommand:
        arguments:
            $logger: '@monolog.logger.cronjob'
            $cronJobsRegistry: '@Ibexa\Bundle\Cron\Registry\CronJobsRegistry'
        tags:
            - { name: 'console.command' }
